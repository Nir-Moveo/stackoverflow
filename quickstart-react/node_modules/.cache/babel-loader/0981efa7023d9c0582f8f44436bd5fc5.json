{"ast":null,"code":"var _jsxFileName = \"/Users/nirassaraf/Desktop/Projects-Skills/stackoverflow/quickstart-react/src/components/Search.tsx\";\nimport { SearchContainer, SearchIcon, SearchInput } from \"./SearchStyle\";\nimport mondaySdk from \"monday-sdk-js\";\nimport React, { useEffect, useState } from \"react\";\nexport const Search = () => {\n  // const d =monday.listen(\"context\", async (res)=>{\n  //  return await res.data.itemId;\n  // })\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const monday = mondaySdk();\n  const [itemId, setItemId] = useState(\"\");\n\n  const fetchApi = async () => {\n    try {\n      await monday.listen(\"context\", res => {\n        console.log(res.data);\n        setItemId(res.data.itemId);\n      });\n      let query = `query { items (ids: [${itemId}]) { name }}`;\n      fetch(\"https://api.monday.com/v2\", {\n        method: 'post',\n        mode: 'no-cors',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': process.env.MONDAY_API_KEY\n        },\n        body: JSON.stringify({\n          query: query\n        })\n      }).then(res => res.json()).then(res => console.log(JSON.stringify(res, null, 2))).catch(err => {\n        console.log(err);\n      });\n    } catch (err) {\n      setErrorMessage(\"Something went wrong\");\n    }\n  };\n\n  useEffect(() => {\n    fetchApi();\n  }, []);\n  return /*#__PURE__*/React.createElement(SearchContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(SearchInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }));\n};","map":{"version":3,"sources":["/Users/nirassaraf/Desktop/Projects-Skills/stackoverflow/quickstart-react/src/components/Search.tsx"],"names":["SearchContainer","SearchIcon","SearchInput","mondaySdk","React","useEffect","useState","Search","errorMessage","setErrorMessage","monday","itemId","setItemId","fetchApi","listen","res","console","log","data","query","fetch","method","mode","headers","process","env","MONDAY_API_KEY","body","JSON","stringify","then","json","catch","err"],"mappings":";AAAA,SAASA,eAAT,EAA0BC,UAA1B,EAAsCC,WAAtC,QAAyD,eAAzD;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAGA,OAAO,MAAMC,MAAM,GAAG,MAAI;AACxB;AACA;AACA;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCH,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAMI,MAAM,GAAGP,SAAS,EAAxB;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,EAAD,CAApC;;AAEA,QAAMO,QAAQ,GAAG,YAAY;AAC3B,QAAI;AACF,YAAMH,MAAM,CAACI,MAAP,CAAc,SAAd,EAA0BC,GAAD,IAAS;AACtCC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAN,QAAAA,SAAS,CAACG,GAAG,CAACG,IAAJ,CAASP,MAAV,CAAT;AACD,OAHK,CAAN;AAIA,UAAIQ,KAAK,GAAI,wBAAuBR,MAAO,cAA3C;AAEAS,MAAAA,KAAK,CAAE,2BAAF,EAA+B;AAClCC,QAAAA,MAAM,EAAE,MAD0B;AAElCC,QAAAA,IAAI,EAAC,SAF6B;AAGlCC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,2BAAkBC,OAAO,CAACC,GAAR,CAAYC;AAFvB,SAHyB;AAOjCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBV,UAAAA,KAAK,EAAGA;AADW,SAAf;AAP2B,OAA/B,CAAL,CAWIW,IAXJ,CAWSf,GAAG,IAAIA,GAAG,CAACgB,IAAJ,EAXhB,EAYID,IAZJ,CAYSf,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYW,IAAI,CAACC,SAAL,CAAed,GAAf,EAAoB,IAApB,EAA0B,CAA1B,CAAZ,CAZhB,EAaIiB,KAbJ,CAaWC,GAAD,IAAO;AACZjB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AAED,OAhBJ;AAkBD,KAzBD,CAyBE,OAAOA,GAAP,EAAY;AACZxB,MAAAA,eAAe,CAAC,sBAAD,CAAf;AACD;AACF,GA7BD;;AA+BAJ,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;AAGA,sBACA,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADA;AAKD,CA/CM","sourcesContent":["import { SearchContainer, SearchIcon, SearchInput } from \"./SearchStyle\"\nimport mondaySdk from \"monday-sdk-js\";\nimport React, { useEffect, useState } from \"react\";\n\n\nexport const Search = ()=>{\n  // const d =monday.listen(\"context\", async (res)=>{\n  //  return await res.data.itemId;\n  // })\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const monday = mondaySdk();\n  const [itemId, setItemId] = useState(\"\");\n\n  const fetchApi = async () => {\n    try {\n      await monday.listen(\"context\", (res) => {\n        console.log(res.data);\n        setItemId(res.data.itemId);\n      });\n      let query = `query { items (ids: [${itemId}]) { name }}`;\n\n      fetch (\"https://api.monday.com/v2\", {\n        method: 'post',\n        mode:'no-cors',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization' : process.env.MONDAY_API_KEY as string\n         },\n         body: JSON.stringify({\n           query : query\n         })\n        })\n         .then(res => res.json())\n         .then(res => console.log(JSON.stringify(res, null, 2)))\n         .catch((err)=>{\n           console.log(err);\n           \n         });\n      \n    } catch (err) {\n      setErrorMessage(\"Something went wrong\");\n    }\n  };\n\n  useEffect(() => {\n    fetchApi();\n  }, []);\n  return (\n  <SearchContainer>\n    <SearchIcon/>\n    <SearchInput></SearchInput>\n  </SearchContainer>)\n}"]},"metadata":{},"sourceType":"module"}